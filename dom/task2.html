<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <style type="text/css">
    .secondRow {
  display: flex;
  flex-direction: row;
  align-items: center;
}


.container {
  display: flex;
  flex-direction: row;
  margin: 6px;
}

#timerCounter {
  width: 42px;
  margin-bottom:10px;
}

  </style>
  <script>
    const emptyImageSrc = "data:,";
    let urls = ["https://previews.123rf.com/images/puhhha/puhhha1704/puhhha170401434/77025196-woman-summer-fashion-sexy-girl-with-fit-curvy-body-shape-firm-buttocks-tanned-skin-in-beautiful-colo.jpg",
               "https://avatars.yandex.net/get-music-content/143117/886cd885.a.8432848-1/m1000x1000",
                "https://m1.35photo.pro/photos_main/612/3061889.jpg"
               ];
    let index = -1;
    let delay = 3000;
    let timerId; 
    function onLoad() { 
      timerId = setInterval(nextImage, delay);
      document.getElementById("timerCounter").oninput = clear;
    }
    function clear() {
      clearInterval(timerId);
      delay = document.getElementById("timerCounter").value * 1000;
      timerId = setInterval(nextImage, delay);
    }
    
    function addImage() {
      const url = document.getElementById("urlInput").value;
      if(!isValid(url)) {
        console.log("isNotValid");
        return;
      }
      console.log(url)
      console.log(urls)
      urls.push(url)
      if(index === -1) index = 0;
      updateImage(index);
    }
    
    
    function isValid(url) {
      var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
    '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
    '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
    '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
    return url && !!pattern.test(url);
    }
    
    function updateImage(i) {
      const imageElement = document.getElementById("image");
      let url;
      if(i) {
        url = urls[i];
      } else {
        url = urls[index]; // add check for size later
      }
      imageElement.src = url;
    }
    function nextImage() {
      clear();
      if(urls.length === 0) 
      {
       document.getElementById("image").src = emptyImageSrc;
       return;                            
      }
      if(index + 1 >= urls.length) {
        index = 0;        
      } else {
        index++;        
      }
      updateImage(index);      
    }
    function previousImage() {
      clear();
      if(urls.length === 0) return;
      if(index - 1 >= 0) {
        index--;        
      } else {
        index = urls.length - 1;        
      }
      updateImage(index);  
    }
    function removeImage() {
      const currentIndex = index;
      console.log(currentIndex)
      console.log(urls)
      if(currentIndex < 0) return;
      urls.splice(index, 1);
      if(urls.length === 0)  {
        index = -1;
      }
      else if(currentIndex > urls.length) {
        index = urls.length - 1;
      }
      nextImage();
    }    
  </script>
  
</head>
<body onload="onLoad()">
  <div class="container">
    <div class="firstRow">
      <input class="urlInput" id="urlInput"/>
      <button class="addButton" id="addButton" onClick="addImage()">Add</button>
      Timer 
      <input 
             type="number" 
             id="timerCounter" 
             step="1"
             value=3
             >       
      </div>
    </div>
  
    <div class="secondRow">
      <div class="previous" id="previous" onClick="previousImage()">
        <img src="https://image.flaticon.com/icons/png/512/60/60775.png"
             width=30
             >
      </div>
      <div class="imageContainer" ondblclick="removeImage()">
        <img id="image" 
             class="image" 
             src="data:," 
             border="5"
             width=300
             height=300
             >
      </div>
      <div class="next" id="next" onClick="nextImage()">
        <img src="https://image.flaticon.com/icons/png/512/60/60775.png"
               width=30 style="transform:rotate(180deg);"
               >
      </div>
    </div>
  </div>
</body>
</html>





